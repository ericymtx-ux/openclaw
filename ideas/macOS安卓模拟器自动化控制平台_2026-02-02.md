# macOS安卓模拟器自动化控制平台

**创建时间**: 2026-02-02
**来源**: 用户分享的深度调研报告
**状态**: 待评估

---

## 核心目标

在 macOS 上构建可程序化控制的安卓模拟器平台，实现：
- 生命周期管理（启动/停止/快照/并发）
- 设备级控制（传感器、网络、来电短信、指纹）
- 应用层控制（安装卸载、页面跳转、输入、截图）

---

## 功能需求

### 1. Android 官方模拟器 (AVD) 集成

**接口类型**:
- ADB (Android Debug Bridge)
- Emulator Console / Telnet
- gRPC (实验性)

**功能**:
- ✅ 启动/停止模拟器
- ✅ 无头模式运行 (CI)
- ✅ 快照管理
- ✅ 并发端口管理
- ✅ 应用安装/卸载
- ✅ Activity 启动
- ✅ 模拟输入 (tap, swipe, text)
- ✅ 截图
- ✅ 地理位置模拟
- ✅ 网络状况模拟 (延迟/速度)
- ✅ 传感器模拟 (加速度计)
- ✅ 来电/短信模拟
- ✅ 指纹模拟

### 2. Genymotion Cloud 集成 (可选)

**功能**:
- REST API 生命周期管理
- 云端实例创建/销毁

### 3. Appium 集成

**功能**:
- UI 自动化 (WebDriver)
- 与 ADB/Console 混合控制

---

## 技术架构

```
┌─────────────────────────────────────────────────────────┐
│            macOS 安卓模拟器自动化控制平台                 │
├─────────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐     │
│  │ AVD Manager │  │ Genymotion  │  │  Appium     │     │
│  │ (官方)      │  │  (云端)     │  │  (UI自动化) │     │
│  └──────┬──────┘  └──────┬──────┘  └──────┬──────┘     │
│         │                │                │             │
│         └────────────────┼────────────────┘             │
│                          │                              │
│              ┌───────────┴───────────┐                  │
│              │   Unified Controller   │                  │
│              │   (统一控制层)          │                  │
│              └───────────┬───────────┘                  │
│                          │                              │
│              ┌───────────┴───────────┐                  │
│              │   Automation Scripts   │                  │
│              │   (Python/Bash)        │                  │
│              └───────────┬───────────┘                  │
└──────────────────────────┼──────────────────────────────┘
                           │
                           ▼
              ┌───────────────────────────┐
              │   Vision LLM Integration  │
              │   (未来扩展：看图操作)     │
              └───────────────────────────┘
```

---

## 数据流

```
1. 用户请求 → 2. 解析意图 → 3. 调用相应接口 → 4. 执行操作 → 5. 返回结果

示例：模拟来电并截图
用户: "模拟来电 10086 并截图"
    ↓
意图解析: [模拟来电, 截图]
    ↓
调用 Console: "gsm call 10086"
调用 ADB: "adb exec-out screencap"
    ↓
返回: 截图文件
```

---

## 接口清单

### ADB 接口

```bash
# 应用管理
adb install -r app.apk
adb shell am start -n com.pkg/.MainActivity

# 模拟输入
adb shell input tap 500 500
adb shell input text "hello"
adb shell input swipe 100 100 300 300 500

# 截图
adb exec-out screencap -p > screenshot.png

# 端口转发
adb forward tcp:8080 tcp:8080
```

### Emulator Console 接口

```bash
# 连接
telnet localhost 5554
auth $(cat ~/.emulator_console_auth_token)

# 地理位置
geo fix -122.084 37.422

# 网络状况
network delay none
network speed lte

# 传感器
sensor set acceleration 0:9.8:0

# 来电/短信
gsm call +123456789
sms send +123456789 "Hello from Automation"

# 指纹
finger touch 1
```

---

## 项目结构

```
android-emulator-automation/
├── README.md
├── requirements.txt
├── setup.sh                    # 安装脚本
├── scripts/
│   ├── avd_manager.py         # AVD 管理
│   ├── console_client.py      # Console 客户端
│   ├── adb_utils.py           # ADB 工具
│   └── appium_integration.py  # Appium 集成
├── tests/
│   ├── test_avd.py
│   ├── test_console.py
│   └── test_appium.py
├── examples/
│   ├── simulate_call.sh       # 模拟来电示例
│   ├── simulate_network.sh    # 模拟网络示例
│   └── full_workflow.py       # 完整工作流
└── docs/
    └── api_reference.md       # API 文档
```

---

## 开发路线图

### Phase 1: 基础能力 (1周)

- [ ] 环境搭建 (Android Studio, cmdline-tools)
- [ ] AVD 管理脚本
- [ ] ADB 工具封装
- [ ] Console 客户端

### Phase 2: 高级功能 (1周)

- [ ] 快照管理
- [ ] 并发控制
- [ ] Appium 集成
- [ ] 混合控制脚本

### Phase 3: 智能化 (未来)

- [ ] Vision LLM 集成
- [ ] 自然语言控制
- [ ] 自动化测试框架

---

## 相关文档

- 原始调研报告: `inbound/file_15---9f983402-c4e8-401c-b2fc-38f963d301ea.md`
- 官方文档: Android Developer - ADB
- 官方文档: Android Developer - Emulator Console

---

*最后更新: 2026-02-02 23:42*
