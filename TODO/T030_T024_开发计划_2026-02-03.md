# T030 + T024 开发计划

## 🎯 任务目标

1. **T030**: 优化股票邮件监控脚本（修复超时）
2. **T024**: 实现 Morning Brief Agent（天气 + 任务 + Telegram）

---

## ✅ Definition of Done (DoD)

### 代码层面
- [ ] 脚本执行 < 30 秒
- [ ] 无 lint 错误
- [ ] 至少 1 个测试用例通过

### 功能层面
- [ ] 股票邮件脚本：支持并发读取邮件
- [ ] Morning Brief：天气 + 任务扫描 + Telegram 发送

### 文档层面
- [ ] README 更新（安装/使用）
- [ ] 成功发送测试报告到 Telegram

---

## 📋 任务拆解

### T030: 股票邮件脚本优化
| 子任务 | 预估时间 | 验收标准 |
|--------|----------|----------|
| 分析瓶颈 | 5min | 定位到 himalaya 命令耗时 |
| 并发优化 | 15min | 使用 ThreadPoolExecutor |
| 验证测试 | 10min | 执行 <30s，无报错 |

### T024: Morning Brief Agent
| 子任务 | 预估时间 | 验收标准 |
|--------|----------|----------|
| 天气集成 | 10min | 使用 weather skill |
| 任务扫描 | 10min | 读取 BOT_TASKS + TODO/ |
| Telegram 集成 | 15min | 成功发送 Markdown 报告 |
| 端到端测试 | 5min | 完整流程跑通 |

---

## 🔧 技术方案

### T030 优化
```python
# 使用并发读取邮件
with ThreadPoolExecutor(max_workers=5) as executor:
    futures = [executor.submit(read_email, id) for id in email_ids]
    results = [f.result() for f in futures]
```

### T024 架构
```
MorningBriefAgent
├── weather_service (weather skill)
├── task_scanner (BOT_TASKS + TODO/)
├── report_generator (Markdown)
└── telegram_sender (message tool)
```

---

## 📦 依赖

- weather skill: 已存在
- telegram message: 已配置
- himalaya: 已配置

---

*Created: 2026-02-03 14:05*
