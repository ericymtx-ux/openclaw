# Android Phone MCP 开发计划 (Phase 2)

根据架构设计文档和当前进度，我们将重点完善 **数据层 (Data Layer)** 的精准控制能力和 **观察层 (Observation)** 的数据效率。

## 1. 增强控制能力 (Action Enhancement)
目前的 `tap` 仅支持坐标点击，对于不同分辨率的设备兼容性较差。我们将实现基于 **UI 选择器** 的操作。

- [ ] **实现 `click_element`**: 在 `AndroidController` 中添加支持。
    - 支持通过 `text` (文本内容) 查找并点击。
    - 支持通过 `resourceId` (控件ID) 查找并点击。
    - 自动等待控件出现 (Implicit Wait)。
- [ ] **暴露 MCP 工具**: 添加 `tap_element` 工具。

## 2. 优化观察数据 (Observation Optimization)
原始 UI XML 树非常庞大 (包含大量布局嵌套和冗余属性)，不仅消耗 Token，还会干扰 VLM 的注意力。

- [ ] **实现 `get_compact_ui_hierarchy`**: 
    - 解析原始 XML。
    - 过滤掉不可见 (visible=false) 的节点。
    - 过滤掉无交互属性 (clickable=false, long-clickable=false, checkable=false) 且无文本内容的布局容器。
    - 仅保留关键属性: `text`, `content-desc`, `resource-id`, `bounds`, `checked`。
- [ ] **更新 `get_screen_state`**: 使用优化后的 XML。

## 3. 验证与测试
- [ ] 编写单元测试验证 XML 过滤逻辑。
- [ ] 验证 `click_element` 在真实/模拟设备上的表现。

---

**是否立即开始执行上述 Phase 2 开发计划？**